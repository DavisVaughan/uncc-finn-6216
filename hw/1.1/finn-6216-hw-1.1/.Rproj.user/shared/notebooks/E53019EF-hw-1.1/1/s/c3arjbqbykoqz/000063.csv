"0","# Required for delta/gamma analytical"
"0","d1 <- (log(current_close_aapl / k) + (r - y + sigma^2 / 2) * time_to_expiry) / (sigma * sqrt(time_to_expiry))"
"0","# Put delta and gamma"
"0","delta_analytical <- exp(-y * time_to_expiry) * (pnorm(d1) - 1)"
"0","delta_analytical"
"1","[1]"
"1"," -0.400626"
"1","
"
"0","gamma_numerator   <- exp(-y * time_to_expiry) * exp(- (d1 ^ 2) / 2)"
"0","gamma_denominator <- current_close_aapl * sigma * sqrt(time_to_expiry) * sqrt(2 * pi)"
"0","gamma_analytical <- gamma_numerator / gamma_denominator"
"0","gamma_analytical"
"1","[1]"
"1"," 0.0129268"
"1","
"
"0","# Apple DG analytical approx with absolute shifts"
"0","aapl_abs_dg_analytical <- aapl_abs %>%"
"0","  mutate(delta_p =  delta_analytical * delta_close + 1/2 * gamma_analytical * delta_close ^ 2)"
"0","aapl_abs_dg_analytical"
