"0","join_and_weight <- function(aapl, spy, options_aapl, shares_spy) {"
"0","  aapl %>%"
"0","    left_join(spy, ""date"") %>%"
"0","    mutate(portf_delta_p = shares_spy * spy_delta_p + options_aapl * delta_p) %>%"
"0","    na.omit()"
"0","}"
"0","summarise_VaR <- function(portfolio, percentile) {"
"0","  portfolio %>%"
"0","    summarise(VaR = sort(portf_delta_p)[percentile])"
"0","}"
